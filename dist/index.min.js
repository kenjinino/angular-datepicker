"use strict";!function(a){function b(a,b){a=new Date(a||new Date),a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours());for(var c=[],d=a.getTime()+36e5;a.getTime()<d;)c.push(a),a=new Date(a.getTime()+60*b*1e3);return c}function c(a){a=new Date(a||new Date),a.setDate(1),a.setHours(12),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),0!==a.getDay()&&a.setDate(a.getDate()-a.getDay());for(var b=[];b.length<42;)b.push(new Date(a)),a.setDate(a.getDate()+1);return b}function d(a){var b=[];a=new Date(a||new Date),a.setFullYear(a.getFullYear()-a.getFullYear()%10);for(var c=0;12>c;c++)b.push(new Date(a.getFullYear()+(c-1),0,1));return b}function e(a){a=new Date(a||new Date),a=new Date(a.getFullYear(),a.getMonth(),a.getDate()),a.setDate(a.getDate()-a.getDay());for(var b=[],c=0;7>c;c++)b.push(new Date(a)),a.setDate(a.getDate()+1);return b}function f(a){a=new Date(a||new Date);for(var b=a.getFullYear(),c=[],d=0;12>d;d++)c.push(new Date(b,d,1));return c}function g(a){a=new Date(a||new Date),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);for(var b=[],c=0;24>c;c++)b.push(a),a=new Date(a.getTime()+36e5);return b}function h(a,b){return a&&a.getTime()<=b.getTime()}function i(a,b){return a.getTime()>=b.getTime()}function j(a,b){return a&&a.getFullYear()===b.getFullYear()}function k(a,b){return j(a,b)&&a.getMonth()===b.getMonth()}function l(a,b){return k(a,b)&&a.getDate()===b.getDate()}function m(a,b){return l(a,b)&&a.getHours()===b.getHours()}function n(a,b){return m(a,b)&&a.getMinutes()===b.getMinutes()}var o=a.module("datePicker",["ui.mask"]);o.constant("datePickerConfig",{template:"templates/datepicker.html",view:"month",views:["year","month","date","hours","minutes"],step:5}),o.filter("time",function(){function a(a){return("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)}return function(b){return b instanceof Date||(b=new Date(b),!isNaN(b.getTime()))?a(b):void 0}}),o.directive("datePicker",["datePickerConfig","$filter","$locale",function(a,o,p){return{template:'<div ng-include="template"></div>',scope:{model:"=datePicker",after:"=?",before:"=?",status:"=?"},link:function(q,r,s){function t(){var a=q.view,h=q.date;switch(a){case"year":q.years=d(h);break;case"month":q.months=f(h);break;case"date":q.weekdays=q.weekdays||e(),q.days=c(h);break;case"hours":q.hours=g(h);break;case"minutes":q.minutes=b(h,w)}}function u(){return"date"!==q.view?q.view:q.model?q.model.getTime():null}function v(){q.model&&(q.date.setTime(q.model.getTime()),q.inputDateTime.date=o("date")(q.model,q.inputDateFormat),t())}q.date=new Date(q.model||new Date),q.views=a.views.concat(),q.view=s.view||a.view,q.now=new Date,q.template=s.template||a.template;var w=parseInt(s.step||a.step,10),x=!!s.partial;q.inputDateTime={date:q.model,time:null},q.status=q.status||{hasDate:!1,hasTime:!1},q.views=q.views.slice(q.views.indexOf(s.maxView||"year"),q.views.indexOf(s.minView||"minutes")+1),(1===q.views.length||-1===q.views.indexOf(q.view))&&(q.view=q.views[0]),q.setView=function(a){-1!==q.views.indexOf(a)&&(q.view=a)},q.setDate=function(a){if(!s.disabled){q.date=a;var b=q.views[q.views.indexOf(q.view)+1];if(!b||x||q.model){q.model=new Date(q.model||a);var c=x?"minutes":q.view;switch(c){case"minutes":q.model.setMinutes(a.getMinutes());case"hours":q.model.setHours(a.getHours());case"date":q.model.setDate(a.getDate());case"month":q.model.setMonth(a.getMonth());case"year":q.model.setFullYear(a.getFullYear())}q.$emit("setDate",q.model,q.view)}b&&q.setView(b)}},q.$watch(u,t),q.$watch(u,v),q.next=function(a){var b=q.date;switch(a=a||1,q.view){case"year":case"month":b.setFullYear(b.getFullYear()+a);break;case"date":b.setMonth(b.getMonth()+a);break;case"hours":case"minutes":b.setHours(b.getHours()+a)}t()},q.prev=function(a){return q.next(-a||-1)},q.isAfter=function(a){return q.after&&h(a,q.after)},q.isBefore=function(a){return q.before&&i(a,q.before)},q.isSameMonth=function(a){return k(q.model,a)},q.isSameYear=function(a){return j(q.model,a)},q.isSameDay=function(a){return l(q.model,a)},q.isSameHour=function(a){return m(q.model,a)},q.isSameMinutes=function(a){return n(q.model,a)},q.isNow=function(a){var b=!0,c=q.now;switch(q.view){case"minutes":b&=~~(a.getMinutes()/w)===~~(c.getMinutes()/w);case"hours":b&=a.getHours()===c.getHours();case"date":b&=a.getDate()===c.getDate();case"month":b&=a.getMonth()===c.getMonth();case"year":b&=a.getFullYear()===c.getFullYear()}return b},q.inputDateFormat="en-us"===p.id?"MMddyyyy":"ddMMyyyy",q.$watch("inputDateTime.date",function(a){if(!a||a.length<8)return void(q.status.hasDate=!1);a=a.toString();var b=q.formatDate(a,p.id);q.isValidDate(b)&&(q.status.hasDate=!0,q.setDate(b))}),q.$watch("inputDateTime.time",function(a){if(a&&!(a.length<4)){a=a.toString();var b=q.formatHours(a),c=q.formatMinutes(a);q.isValidTime(b,c)?(q.model.setHours(b,c),q.setDate(q.model),q.status.hasTime=!0):q.status.hasTime=!1}}),q.formatDate=function(a,b){var c,d,e;return"en-us"===b?(d=parseInt(a.slice(0,2),10),e=parseInt(a.slice(2,4),10),c=parseInt(a.slice(4,8),10)):(e=parseInt(a.slice(0,2),10),d=parseInt(a.slice(2,4),10),c=parseInt(a.slice(4,8),10)),new Date([c,d,e].join("/"))},q.formatHours=function(a){return parseInt(a.slice(0,2),10)},q.formatMinutes=function(a){return parseInt(a.slice(2,4),10)},q.isValidDate=function(a){return null!==a.toJSON()},q.isValidTime=function(a,b){return 23>=a&&a>=0&&59>=b&&b>=0},q.toggleTimeInput=function(){q.isTimeActive=!q.isTimeActive,q.isTimeActive||(q.inputDateTime.time="",q.status.hasTime=!1)},q.toggleTimeInputFocused=function(){q.isTimeInputFocused=!q.isTimeInputFocused},q.toggleDateInputFocused=function(){q.isDateInputFocused=!q.isDateInputFocused}}}}]);var o=a.module("datePicker");o.directive("dateRange",function(){return{templateUrl:"templates/daterange.html",scope:{to:"=",today:"=",yesterday:"=",lastWeek:"=",lastMonth:"=",start:"=",end:"=",status:"="},link:function(a,b,c){a.status=a.status||{isToday:!1,isYesterday:!1,isLastWeek:!1,isLastMonth:!1,startStatus:{hasDate:!1,hasTime:!1},endStatus:{hasDate:!1,hasTime:!1}},c.$observe("disabled",function(b){a.disableDatePickers=!!b}),a.$watch("start.getTime()",function(b){b&&a.end&&b>a.end.getTime()&&(a.end=new Date(b))}),a.$watch("end.getTime()",function(b){b&&a.start&&b<a.start.getTime()&&(a.start=new Date(b))}),a.setToday=function(){a.start=new Date,a.end=new Date,a.status.isYesterday=a.status.isLastWeek=a.status.isLastMonth=!1,a.status.isToday=!0},a.setYesterday=function(){var b=new Date;b.setDate(b.getDate()-1),a.start=b,a.end=b,a.status.isToday=a.status.isLastWeek=a.status.isLastMonth=!1,a.status.isYesterday=!0},a.setLastWeek=function(){var b=new Date;b.setDate(b.getDate()-7),a.start=b,a.end=new Date,a.status.isToday=a.status.isYesterday=a.status.isLastMonth=!1,a.status.isLastWeek=!0},a.setLastMonth=function(){var b=new Date;b.setMonth(b.getMonth()-1),a.start=b,a.end=new Date,a.status.isToday=a.status.isYesterday=a.status.isLastWeek=!1,a.status.isLastMonth=!0}}}});var p="ng-pristine",q="ng-dirty",o=a.module("datePicker");o.constant("dateTimeConfig",{template:function(a){return'<div date-picker="'+a.ngModel+'" '+(a.view?'view="'+a.view+'" ':"")+(a.maxView?'max-view="'+a.maxView+'" ':"")+(a.template?'template="'+a.template+'" ':"")+(a.minView?'min-view="'+a.minView+'" ':"")+(a.partial?'partial="'+a.partial+'" ':"")+'class="dropdown-menu"></div>'},format:"yyyy-MM-dd HH:mm",views:["date","year","month","hours","minutes"],dismiss:!1,position:"relative"}),o.directive("dateTimeAppend",function(){return{link:function(a,b){b.bind("click",function(){b.find("input")[0].focus()})}}}),o.directive("dateTime",["$compile","$document","$filter","dateTimeConfig","$parse",function(b,c,d,e,f){var g=c.find("body"),h=d("date");return{require:"ngModel",scope:!0,link:function(c,d,i,j){function k(a){return h(a,r)}function l(){return j.$modelValue}function m(a){a.stopPropagation(),j.$pristine&&(j.$dirty=!0,j.$pristine=!1,d.removeClass(p).addClass(q),s&&s.$setDirty(),j.$render())}function n(){x&&(x.remove(),x=null),z&&(z.remove(),z=null)}function o(){if(!x){if(x=b(A)(c),c.$digest(),c.$on("setDate",function(a,b,c){m(a),w&&t[t.length-1]===c&&n()}),c.$on("$destroy",n),"absolute"===y){var e=a.extend(d.offset(),{height:d[0].offsetHeight});x.css({top:e.top+e.height,left:e.left,display:"block",position:y}),g.append(x)}else z=a.element("<div date-picker-wrapper></div>"),d[0].parentElement.insertBefore(z[0],d[0]),z.append(x),x.css({top:d[0].offsetHeight+"px",display:"block"});x.bind("mousedown",function(a){a.preventDefault()})}}var r=i.format||e.format,s=d.inheritedData("$formController"),t=f(i.views)(c)||e.views.concat(),u=i.view||t[0],v=t.indexOf(u),w=i.dismiss?f(i.dismiss)(c):e.dismiss,x=null,y=i.position||e.position,z=null;-1===v&&t.splice(v,1),t.unshift(u),j.$formatters.push(k),j.$parsers.unshift(l);var A=e.template(i);d.bind("focus",o),d.bind("blur",n)}}}]),a.module("datePicker").run(["$templateCache",function(a){a.put("templates/datepicker.html",'<div class="datepicker">\n\n  <div class="datepicker-input" ng-class="{ \'is-focused\': isDateInputFocused }">\n    <input class="datepicker-input-date" type="text" maxlength="10" ng-model="inputDateTime.date" ui-mask="99/99/9999" ng-focus="toggleDateInputFocused()"\n      ng-blur="toggleDateInputFocused()"></input>\n    <svg class="datepicker-input-icon" ng-click="toggleTimeInput()" ng-class="{ \'is-active\': isTimeActive, \'is-focused\': isTimeInputFocused }"\n      version="1.1" id="icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">\n    <g id="time">\n      <path d="M12.5,10H10V6.5C10,6.22,9.78,6,9.5,6C9.22,6,9,6.22,9,6.5V11h3.5c0.28,0,0.5-0.22,0.5-0.5C13,10.22,12.78,10,12.5,10z"/>\n      <path d="M10,3c-3.87,0-7,3.13-7,7s3.13,7,7,7s7-3.13,7-7S13.87,3,10,3z M10,16c-3.31,0-6-2.69-6-6s2.69-6,6-6s6,2.69,6,6\n        S13.31,16,10,16z"/>\n    </g>\n    </svg>\n    <input\n      class="datepicker-input-time"\n      type="text"\n      maxlength="5"\n      ng-model="inputDateTime.time"\n      ui-mask="99:99"\n      ng-if="isTimeActive"\n      ng-focus="toggleTimeInputFocused()"\n      ng-blur="toggleTimeInputFocused()">\n    </input>\n  </div>\n\n  <div class="datepicker-actions">\n    <span class="datepicker-actions-arrow" ng-click="prev()">\n      <svg class="datepicker-actions-arrow-icon is-previous" version="1.1" id="icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n         viewBox="0 0 9 16" enable-background="new 0 0 9 16" xml:space="preserve">\n      <polygon id="arrow" points="9,8 1.03448,0 0,1.06667 6.93103,8 0,14.93333 1.03448,16 "/>\n      </svg>\n    </span>\n    <span class="datepicker-actions-switch">{{date|date:"yyyy MMMM"}}</span>\n    <span class="datepicker-actions-arrow" ng-click="next()">\n      <svg class="datepicker-actions-arrow-icon is-next" version="1.1" id="icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n         viewBox="0 0 9 16" enable-background="new 0 0 9 16" xml:space="preserve">\n      <polygon id="arrow" points="9,8 1.03448,0 0,1.06667 6.93103,8 0,14.93333 1.03448,16 "/>\n      </svg>\n    </span>\n  </div>\n\n  <div class="datepicker-calendar">\n    <span\n      class="datepicker-calendar-weekday"\n      ng-repeat="day in weekdays"\n      style="overflow: hidden">\n      {{ day|date:"EEE"|limitTo:1 }}\n    </span>\n    <span\n      class="datepicker-calendar-day"\n      ng-repeat="day in days"\n      ng-class="{\'is-now\':isNow(day),\'is-active\':isSameDay(day),\'is-disabled\':(day.getMonth()!=date.getMonth()),\'is-after\':isAfter(day),\'is-before\':isBefore(day)}"\n      ng-click="setDate(day)"\n      ng-bind="day.getDate()">\n    </span>\n    <div class="clearfix"></div>\n  </div>\n</div>\n'),a.put("templates/daterange.html",'<div class="date-range-container">\n    <div class="date-range-actions">\n        <button class="date-range-action" ng-click="setToday()">{{today}}</button>\n        <button class="date-range-action" ng-click="setYesterday()">{{yesterday}}</button>\n        <button class="date-range-action" ng-click="setLastWeek()">{{lastWeek}}</button>\n        <button class="date-range-action" ng-click="setLastMonth()">{{lastMonth}}</button>\n    </div>\n    <div class="date-range">\n        <div date-picker="start" status="status.startStatus" ng-disabled="disableDatePickers"  class="date-picker" date after="start" before="end" min-view="date" max-view="date"></div>\n        <div class="date-range-separator">{{to}}</div>\n        <div date-picker="end" status="status.endStatus" ng-disabled="disableDatePickers"  class="date-picker" date after="start" before="end"  min-view="date" max-view="date"></div>\n    </div>\n</div>\n')}])}(angular);